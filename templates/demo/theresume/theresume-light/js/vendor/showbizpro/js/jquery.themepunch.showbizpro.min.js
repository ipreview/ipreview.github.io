/**************************************************************************
 * $.themepunch.ShoBiz Pro.js - $ Plugin for ShowBiz Pro Teaser Rotator
 * @version: 1.0 (04.03.2012)
 * @requires $ v1.7 or later
 * @author ThemePunch
**************************************************************************/

(function(e,t){function n(n){n.find(".show_on_hover, .hovercover").each(function(){var r=e(this).closest("li");if(n.data("ie9")||n.data("ie"))e(this).animate({opacity:0},{duration:200,queue:false});else e(this).transit({opacity:0},{duration:200,queue:false});r.hover(function(){e(this).find(".show_on_hover, .hovercover").each(function(){var r=1;if(e(this).data("maxopacity")!=t)r=e(this).data("maxopacity");if(n.data("ie9")||n.data("ie"))e(this).animate({opacity:r},{duration:200,queue:false});else e(this).transit({opacity:r},{duration:200,queue:false})})},function(){e(this).find(".show_on_hover, .hovercover").each(function(){if(n.data("ie9")||n.data("ie"))e(this).animate({opacity:0},{duration:200,queue:false});else e(this).transit({opacity:0},{duration:200,queue:false})})})})}function r(t,n){t.find(".reveal_opener").each(function(){var r=jQuery(this);r.click(function(){if(r.parent().hasClass("reveal_container"))var s=r.parent();else var s=r.parent().find(".reveal_container");if(s.hasClass("revactive")){s.removeClass("revactive");r.removeClass("revactive");s.closest("li").removeClass("revactive");if(t.data("ie9")||t.data("ie")){s.find(".reveal_wrapper").css({visibility:"visible"}).animate({height:"0px",opacity:0},{duration:300})}else{s.find(".reveal_wrapper").css({visibility:"visible"}).transit({height:"0px",opacity:0},{duration:300})}s.find(".sb-vimeo-markup, .sb-yt-markup").html("");if(s.hasClass("tofullwidth")){setTimeout(function(){s.appendTo(s.data("comefrom"));o(200,t,n)},300)}}else{if(s.hasClass("tofullwidth")){s.data("comefrom",s.parent());s.data("indexli",s.closest("li").index());s.appendTo(s.closest(".showbiz"))}setTimeout(function(){if(t.data("coo")=="on")s.closest("ul").find(".reveal_opener").each(function(t){if(e(this).hasClass("revactive"))e(this).click()});s.addClass("revactive");r.addClass("revactive");s.closest("li").addClass("revactive");if(t.data("ie9")||t.data("ie")){s.find(".reveal_wrapper").css({visibility:"visible"}).animate({height:"100%",opacity:1},{duration:300})}else{s.find(".reveal_wrapper").css({visibility:"visible"}).transit({height:"100%",opacity:1},{duration:300})}s.find(".sb-vimeo-markup, .sb-yt-markup").each(function(){var n=e(this);if(n.hasClass("sb-vimeo-markup"))var r=t.data("vimeomarkup");else var r=t.data("ytmarkup");var r=r.split("%%videoid%%")[0]+n.data("videoid")+r.split("%%videoid%%")[1];n.append(r);try{n.fitVids()}catch(i){}});setTimeout(function(){i(t,n)},500)},100)}})})}function i(e,n){var r=e.find(".tofullwidth.revactive .heightadjuster");var i=n.find("ul");var s=parseInt(r.parent().css("paddingTop"),0)+parseInt(r.parent().css("paddingBottom"),0);var o=0;if(e.data("hboffset")!=t)o=e.data("hboffset");var u=o+s+r.outerHeight(true);if(e.data("ie9")||e.data("ie")){i.animate({height:u+"px"},{duration:300,queue:false});i.parent().animate({height:u+"px"},{duration:300,queue:false})}else{i.transit({height:u+"px",duration:300,queue:false});i.parent().transit({height:u+"px",duration:300,queue:false})}}function s(t,n){var r=t.data("carousel");var i=jQuery(n.data("left"));var s=jQuery(n.data("right"));var u=t.width();i.data("teaser",n);s.data("teaser",n);n.data("offset",0);o(0,t,n);t.find("img").each(function(){jQuery(this).parent().waitForImages(function(){})});s.click(function(){if(t.find(".tofullwidth.revactive .heightadjuster").length>0){var n=t.find(".tofullwidth.revactive").data("indexli");var i=n+2;if(i>t.find("ul:first-child li").length)i=1;t.find(".tofullwidth.revactive").addClass("sb-removemesoon");setTimeout(function(){t.find(".tofullwidth.revactive.sb-removemesoon .reveal_opener").click();t.find(".sb-removemesoon").each(function(){e(this).removeClass("sb-removemesoon")})},350);t.find("ul:first-child li:nth-child("+i+")").find(".reveal_opener").click()}else{if(s.data("inmove")!=1){var u=jQuery(jQuery(this).data("teaser"));var a=u.find("ul:first-child");var f=a.find(">li:first-child").offset().left;if(r==1&&f<0){s.data("inmove",1);u.data("offset",u.data("offset")-1);o(0,t,u);a.find(">li:first-child").appendTo(a);u.data("offset",u.data("offset")+1);o(200,t,u);setTimeout(function(){s.data("inmove",0)},350)}else{s.data("inmove",1);var l=1;var c=t.width();if(t.data("allentry")=="on"){if(c>980){l=t.data("vea")[0]}if(c<981&&c>768){l=t.data("vea")[1]}if(c<769&&c>420){l=t.data("vea")[2]}if(c<421){l=t.data("vea")[3]}}u.data("offset",u.data("offset")+l);o(200,t,u);setTimeout(function(){s.data("inmove",0)},350)}}}return false});i.click(function(){if(t.find(".tofullwidth.revactive .heightadjuster").length>0){var n=t.find(".tofullwidth.revactive").data("indexli");var s=n-1;if(s<=0)s=t.find("ul:first-child li").length;t.find(".tofullwidth.revactive").addClass("sb-removemesoon");setTimeout(function(){t.find(".tofullwidth.revactive.sb-removemesoon .reveal_opener").click();t.find(".sb-removemesoon").each(function(){e(this).removeClass("sb-removemesoon")})},350);t.find("ul:first-child li:nth-child("+s+")").find(".reveal_opener").click()}else{if(i.data("inmove")!=1){var u=jQuery(this).data("teaser");var a=u.find("ul:first-child");var f=a.find(">li:first-child").offset().left;if(r==1&&f>=0){i.data("inmove",1);u.data("offset",u.data("offset")+1);o(0,t,u);a.find(">li:last-child").prependTo(a);u.data("offset",u.data("offset")-1);o(200,t,u);setTimeout(function(){i.data("inmove",0)},350)}else{i.data("inmove",1);var l=1;var c=t.width();if(t.data("allentry")=="on"){if(c>980){l=t.data("vea")[0]}if(c<981&&c>768){l=t.data("vea")[1]}if(c<769&&c>420){l=t.data("vea")[2]}if(c<421){l=t.data("vea")[3]}}u.data("offset",u.data("offset")-l);o(200,t,u);setTimeout(function(){i.data("inmove",0)},350)}}}return false});if(t.data("das")!="on")t.swipe({data:t,swipeRight:function(){i.click()},swipeLeft:function(){s.click()},excludedElements:".reveal_opener, a,  .linkicon, .notalone, .lupeicon, .hovercover, .showbiz-navigation, .sb-navigation-left, .sb-navigation-right",allowPageScroll:"auto"});var a;jQuery(window).resize(function(){clearTimeout(a);a=setTimeout(function(){n.data("offset",0);o(0,t,n)},150)});if(r==1){s.data("inmove",1);i.data("inmove",1)}for(var f=0;f<3;f++){jQuery(window).data("teaserreset",setTimeout(function(){o(200,t,n)},f*500));if(f==2)setTimeout(function(){s.data("inmove",0);i.data("inmove",0)},f*500+200)}}function o(n,r,s){var o=r.data("carousel");var u=s.find("ul");var a=s.data("offset");var f=r.width();var l=parseInt(s.css("paddingLeft"),0)+parseInt(s.css("paddingRight"),0);f=f-l;var u=s.find("ul:first");maxitem=u.find(">li").length;var c=e(s.data("right"));c.removeClass("notclickable");var h=e(s.data("left"));h.removeClass("notclickable");var p=r.data("vea")[0];var d=r.data("mediaMaxHeight");if(f>980){p=r.data("vea")[0];try{if(d[0]!=0)r.find(".mediaholder_innerwrap").each(function(){e(this).css({maxHeight:d[0]+"px"})})}catch(v){}}if(f<981&&f>768){p=r.data("vea")[1];try{if(d[1]!=0)r.find(".mediaholder_innerwrap").each(function(){e(this).css({maxHeight:d[1]+"px"})})}catch(v){}}if(f<769&&f>420){p=r.data("vea")[2];try{if(d[2]!=0)r.find(".mediaholder_innerwrap").each(function(){e(this).css({maxHeight:d[2]+"px"})})}catch(v){}}if(f<421){p=r.data("vea")[3];try{if(d[3]!=0)r.find(".mediaholder_innerwrap").each(function(){e(this).css({maxHeight:d[3]+"px"})})}catch(v){}}if(o!=1){if(a>=maxitem-p){a=maxitem-p;c.addClass("notclickable")}if(a<=0){a=0;h.addClass("notclickable")}}var m=u.find(">li:first-child").outerWidth(true)-u.find(">li:first-child").width();var g=0;if(r.data("eoffset")!=t)g=r.data("eoffset")*(p-1);var y=0;if(r.data("croffset")!=t)y=r.data("croffset");step=(f-(p-1)*m)/p;step=step-g;s.data("offset",a);u.find(">li").each(function(){e(this).width(step)});step=u.find("li:first").outerWidth(true);s.data("step",step);u.css({width:"10000px"});if(n==0)u.css({left:0-step*a+"px"});else{u.animate({left:0-step*a+"px"},{duration:n,queue:false})}var b=0;if(r.data("hboffset")!=t)b=r.data("hboffset");setTimeout(function(){var t=0;u.find("li").each(function(){if(e(this).outerHeight(true)>t)t=e(this).outerHeight(true)});setTimeout(function(){if(step>100){var e=u.find(">li:last-child");var t=e.position().left+e.outerWidth(true)+m;u.css({width:t+"px"})}},200);if(r.find(".tofullwidth.revactive .heightadjuster").length>0){i(r,s)}else{if(r.data("ie9")||r.data("ie")){u.animate({height:t+b+"px"},{duration:300,queue:false});u.parent().animate({height:t+b+"px"},{duration:300,queue:false})}else{u.transit({height:t+b+"px",duration:300,queue:false});u.parent().transit({height:t+b+"px",duration:300,queue:false})}}},n+210)}e.fn.extend({showbizpro:function(t){e.fn.showbizpro.defaults={entrySizeOffset:0,containerOffsetRight:0,heightOffsetBottom:0,carousel:"off",visibleElementsArray:[4,3,2,1],mediaMaxHeight:[0,0,0,0],ytMarkup:"<iframe src='http://www.youtube.com/embed/%%videoid%%?hd=1&wmode=opaque&autohide=1&showinfo=0&autoplay=1'></iframe>",vimeoMarkup:"<iframe src='http://player.vimeo.com/video/29298709?title=0&byline=0&portrait=0;api=1&autoplay=1'></iframe>",closeOtherOverlays:"off",allEntryAtOnce:"off",dragAndScroll:"off"};t=e.extend({},e.fn.showbizpro.defaults,t);return this.each(function(){var i=e(this);i.data("eoffset",t.entrySizeOffset);i.data("croffset",t.containerOffsetRight);i.data("hboffset",t.heightOffsetBottom);if(t.carousel=="on")i.data("carousel",1);else i.data("carousel",0);i.data("ytmarkup",t.ytMarkup);i.data("vimeomarkup",t.vimeoMarkup);i.data("vea",t.visibleElementsArray);i.data("coo",t.closeOtherOverlays);i.data("allentry",t.allEntryAtOnce);i.data("mediaMaxHeight",t.mediaMaxHeight);i.data("das",t.dragAndScroll);i.data("ie",!e.support.opacity);i.data("ie9",document.documentMode==9);if(!e.support.transition)e.fn.transition=e.fn.animate;var o=i.find(".showbiz");if(t.dragAndScroll=="on"){o.find(".overflowholder").overscroll({})}s(i,o);r(i,o);try{i.find(".mediaholder_innerwrap").each(function(){e(this).fitVids()})}catch(u){}n(i)})},showbizredraw:function(t){return this.each(function(){var t=e(this);var n=t.find(".showbiz");o(200,t,n)})}})})($)